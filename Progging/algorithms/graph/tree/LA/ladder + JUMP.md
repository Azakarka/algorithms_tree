 Вместо того, чтобы идти по log лестницам, мы просто прыгаем максимально близко и берем ответ. Легко доказать что ответ можно будет взять. O(nlog) времени и памяти, O(1) на ответ.
 
 
 
 Почему можно примерно. 
 
```
int get(int v, int k) {
    if (k == 0)return v;
    v = up[deg[k]][v];
    k -= (1 << deg[k]);
    if (k == 0)return v;
    v = vec[arr[v]][pos[v] + k];
    return v;
}
```
 
 v - наша вершины
 k - **прыжок**
 u - вершина куда мы прыгнули
 root - куда надо
 
 Если мы прыгнули на 2^k нам осталось прыгнуть меньше чем на 2^k. Докажем, что массив в котором лежит root не меньше чем 2^k. Расстояние до нашей точки как минимум 2^k, соответсвенно зеленых вершин как минимум 2^k, а значит столько же и красных, значит всего вершин 2^(k + 1), что больше 2^k, соответсвенно мы можем взять ответ.