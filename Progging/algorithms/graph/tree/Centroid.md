Центроидная декомпозиция - струтура данных, повзоляющая отвечать на запросы на дереве.



Центроид в дереве - такая вершина, при удалении которой в дереве остнанутся компоненты связанностит размером < n / 2

# ИДЕЯ

У нас будет два дерева: первое - то, которое задали, а второе - некое дерево центроидов, или центроидная декомпозиция. 

В центроидной декомпозиции корнем будет центроид графа, его сыновьями будут центроиды подграфов компонент связанностей при удалении основго центроида и тд.


# СВОЙСТВА

1) Высота дерева logn

2) Путь между двумя вершинами в дереве(A, B) - это путь в центройде A-C и B-C, где C= lca(A,B) в центройде.


Соотвественно, раз высота nlog с этим можно как-то играть, правда, я пока не знаю как.